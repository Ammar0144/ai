<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Service API Documentation</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
        }
        .endpoint {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        .method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            color: white;
            font-size: 0.8em;
        }
        .post { background-color: #28a745; }
        .get { background-color: #007bff; }
        .path {
            font-family: 'Courier New', monospace;
            background: #e9ecef;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 10px;
        }
        .description {
            margin: 10px 0;
            color: #666;
        }
        .example {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 1rem;
            border-radius: 4px;
            overflow-x: auto;
        }
        .section {
            margin: 2rem 0;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }
        a {
            color: #667eea;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            margin: 5px 5px 5px 0;
        }
        .badge-primary { background: #007bff; color: white; }
        .badge-success { background: #28a745; color: white; }
        .badge-warning { background: #ffc107; color: #333; }
        .rate-limit {
            background: #fff3cd;
            border: 1px solid #ffc107;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ¤– AI Service API</h1>
        <p>Version 1.0.0 | MIT License</p>
        <p>A production-ready AI gateway with advanced rate limiting and security</p>
    </div>

    <div class="section">
        <h2>ğŸ“– Overview</h2>
        <p>
            The AI Service API provides a secure gateway to AI capabilities powered by DistilGPT-2. 
            Built with Go for high performance, featuring comprehensive rate limiting, CORS support, 
            and production-ready error handling.
        </p>
        
        <h3>ğŸ”‘ Key Features</h3>
        <ul>
            <li>âš¡ <strong>High Performance</strong>: Go-based microservices architecture</li>
            <li>ğŸ”’ <strong>Advanced Rate Limiting</strong>: IP-based token bucket algorithm</li>
            <li>ğŸŒ <strong>CORS Enabled</strong>: Configurable cross-origin support</li>
            <li>ğŸ“š <strong>Swagger UI</strong>: Interactive API documentation</li>
            <li>ğŸ³ <strong>Docker Ready</strong>: Containerized deployment</li>
            <li>ğŸ”— <strong>Microservices</strong>: Gateway pattern with LLM backend</li>
        </ul>

        <h3>ğŸš¦ Rate Limits</h3>
        <div class="rate-limit">
            <strong>Per IP Address Per Minute:</strong>
            <ul>
                <li>AI Processing Endpoints: <strong>30 requests/min</strong></li>
                <li>Health Check: <strong>200 requests/min</strong></li>
                <li>Model Info: <strong>100 requests/min</strong></li>
                <li>Root Info: <strong>100 requests/min</strong></li>
            </ul>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ”— Documentation Links</h2>
        <ul>
            <li><a href="/swagger/index.html" target="_blank">ğŸ“˜ Interactive Swagger UI</a> - Test endpoints live</li>
            <li><a href="/swagger/doc.json" target="_blank">ğŸ“„ OpenAPI Specification (JSON)</a></li>
            <li><a href="/" target="_blank">â„¹ï¸ Service Information</a></li>
            <li><a href="https://github.com/Ammar0144/ai" target="_blank">ğŸ’» GitHub Repository</a></li>
            <li><a href="https://github.com/Ammar0144/llm" target="_blank">ğŸ§  LLM Backend Repository</a></li>
        </ul>
    </div>

    <div class="section">
        <h2>ğŸ“¡ API Endpoints</h2>

        <div class="endpoint">
            <h3>
                <span class="method post">POST</span>
                <span class="path">/ai/chat/completions</span>
                <span class="badge badge-warning">Rate: 30/min</span>
            </h3>
            <p class="description">Generate chat completions based on conversation history.</p>
            <h4>Request Body:</h4>
            <div class="example">
                <pre>{
  "messages": [
    {"role": "user", "content": "Hello, how are you?"}
  ],
  "max_tokens": 150,
  "temperature": 0.7,
  "user_id": "optional-user-id"
}</pre>
            </div>
            <h4>Response:</h4>
            <div class="example">
                <pre>{
  "response": "Hello! I'm doing well...",
  "user_id": "optional-user-id",
  "timestamp": "2025-10-05T04:00:00Z",
  "model": "distilgpt2"
}</pre>
            </div>
        </div>

        <div class="endpoint">
            <h3>
                <span class="method post">POST</span>
                <span class="path">/ai/complete</span>
                <span class="badge badge-warning">Rate: 30/min</span>
            </h3>
            <p class="description">Complete text based on a given prompt.</p>
            <h4>Request Body:</h4>
            <div class="example">
                <pre>{
  "prompt": "The future of AI is",
  "max_tokens": 100,
  "temperature": 0.7,
  "user_id": "optional-user-id"
}</pre>
            </div>
            <h4>Response:</h4>
            <div class="example">
                <pre>{
  "response": "The future of AI is bright and full of possibilities...",
  "user_id": "optional-user-id",
  "timestamp": "2025-10-05T04:00:00Z",
  "model": "distilgpt2"
}</pre>
            </div>
        </div>

        <div class="endpoint">
            <h3>
                <span class="method post">POST</span>
                <span class="path">/ai/generate</span>
                <span class="badge badge-warning">Rate: 30/min</span>
            </h3>
            <p class="description">Generate creative text content based on a prompt.</p>
            <h4>Request Body:</h4>
            <div class="example">
                <pre>{
  "prompt": "Once upon a time",
  "max_tokens": 100,
  "temperature": 0.8,
  "user_id": "optional-user-id"
}</pre>
            </div>
            <h4>Response:</h4>
            <div class="example">
                <pre>{
  "response": "Once upon a time, there was a great adventure...",
  "user_id": "optional-user-id",
  "timestamp": "2025-10-05T04:00:00Z",
  "model": "distilgpt2"
}</pre>
            </div>
        </div>

        <div class="endpoint">
            <h3>
                <span class="method get">GET</span>
                <span class="path">/ai/model-info</span>
                <span class="badge badge-success">Rate: 100/min</span>
            </h3>
            <p class="description">Get detailed information about the current AI model.</p>
            <h4>Response:</h4>
            <div class="example">
                <pre>{
  "model_name": "distilgpt2",
  "model_type": "GPT-2",
  "model_size": "82M parameters",
  "description": "DistilGPT-2 optimized for text generation...",
  "optimized_for": [
    "text_generation",
    "text_completion",
    "chat_conversations"
  ],
  "supported_endpoints": [
    "/generate - Text generation",
    "/complete - Text completion",
    "/chat/completions - Chat conversations"
  ]
}</pre>
            </div>
        </div>

        <div class="endpoint">
            <h3>
                <span class="method get">GET</span>
                <span class="path">/health</span>
                <span class="badge badge-primary">Rate: 200/min</span>
            </h3>
            <p class="description">Check the health status of the AI service.</p>
            <h4>Response:</h4>
            <div class="example">
                <pre>{
  "status": "healthy",
  "timestamp": "2025-10-05T04:00:00Z",
  "version": "1.0.0"
}</pre>
            </div>
        </div>

        <div class="endpoint">
            <h3>
                <span class="method get">GET</span>
                <span class="path">/</span>
                <span class="badge badge-success">Rate: 100/min</span>
            </h3>
            <p class="description">Get service information and available endpoints.</p>
            <h4>Response:</h4>
            <div class="example">
                <pre>{
  "service": "AI Service API",
  "version": "1.0.0",
  "documentation": {
    "swagger_ui": "/swagger/",
    "docs": "/docs",
    "openapi_spec": "/swagger/doc.json"
  },
  "endpoints": {
    "health": "/health",
    "chat_completions": "/ai/chat/completions",
    "complete": "/ai/complete",
    "generate": "/ai/generate",
    "model_info": "/ai/model-info"
  }
}</pre>
            </div>
        </div>
    </div>

    <div class="section">
        <h2>ï¿½ï¿½ Example Usage</h2>
        
        <h3>Chat Completion</h3>
        <div class="example">
            <pre>curl -X POST "http://localhost:8081/ai/chat/completions" \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [{"role": "user", "content": "Hello!"}],
    "temperature": 0.7
  }'</pre>
        </div>

        <h3>Text Completion</h3>
        <div class="example">
            <pre>curl -X POST "http://localhost:8081/ai/complete" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "The future of AI is",
    "max_tokens": 50
  }'</pre>
        </div>

        <h3>Text Generation</h3>
        <div class="example">
            <pre>curl -X POST "http://localhost:8081/ai/generate" \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "Once upon a time",
    "max_tokens": 100,
    "temperature": 0.8
  }'</pre>
        </div>

        <h3>Health Check</h3>
        <div class="example">
            <pre>curl "http://localhost:8081/health"\</pre\>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ—ï¸ Architecture</h2>
        <p>This service follows a microservices architecture pattern:</p>
        <div class="example">
            <pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Clients   â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚  AI Gateway  â”‚â”€â”€â”€â”€â”€â”€â–¶â”‚ LLM Backend  â”‚
â”‚  (Public)   â”‚       â”‚  (Port 8081) â”‚       â”‚ (Port 8082)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   Go-based   â”‚       â”‚    Python    â”‚
                      â”‚ Rate limitingâ”‚       â”‚  DistilGPT-2 â”‚
                      â”‚     CORS     â”‚       â”‚  IP restrict â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
        </div>
        <ul>
            <li><strong>AI Gateway</strong>: Public-facing service with rate limiting, CORS, and security</li>
            <li><strong>LLM Backend</strong>: Internal service running DistilGPT-2 model</li>
            <li><strong>Communication</strong>: HTTP-based service-to-service calls</li>
        </ul>
    </div>

    <div class="section">
        <h2>âš ï¸ Error Responses</h2>
        <p>All endpoints return standardized error responses:</p>
        <div class="example">
            <pre>{
  "error": "Rate limit exceeded",
  "code": 429,
  "message": "Too many requests. Please try again later."
}</pre>
        </div>
        <p><strong>HTTP Status Codes:</strong></p>
        <ul>
            <li><code>200</code> - Success</li>
            <li><code>400</code> - Bad Request (invalid input)</li>
            <li><code>429</code> - Rate Limit Exceeded</li>
            <li><code>500</code> - Internal Server Error</li>
        </ul>
    </div>

    <div class="section">
        <h2>ğŸš€ Getting Started</h2>
        <h3>Local Development</h3>
        <div class="example">
            <pre>git clone https://github.com/Ammar0144/ai.git
cd ai
go mod download
go run main.go</pre>
        </div>

        <h3>Docker Deployment</h3>
        <div class="example">
            <pre>docker-compose up -d</pre>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ“ License</h2>
        <p>This project is licensed under the MIT License.</p>
    </div>

    <footer style="text-align: center; margin-top: 3rem; padding: 2rem; border-top: 1px solid #e9ecef; color: #666;">
        <p>AI Service API v1.0.0 | <a href="https://github.com/Ammar0144/ai">GitHub</a> | <a href="/swagger/index.html">Swagger UI</a></p>
        <p>Built with â¤ï¸ for learning and experimentation</p>
    </footer>
</body>
</html>
